<?php

declare(strict_types=1);

namespace Telepay\Migrations;

use Doctrine\DBAL\Schema\Schema;
use Doctrine\Migrations\AbstractMigration;
use Doctrine\ODM\MongoDB\DocumentManager;
use Symfony\Component\DependencyInjection\ContainerAwareTrait;
use Telepay\FinancialApiBundle\DependencyInjection\Transactions\Core\ContainerAwareInterface;
use Telepay\FinancialApiBundle\Document\Transaction;

/**
 * Class VersionExecuteMissedRecTxDelegatedChangeJuly
 * @package Telepay\Migrations
 */
final class VersionExecuteMissedRecTxDelegatedChangeJuly extends AbstractMigration implements ContainerAwareInterface {
    use ContainerAwareTrait;

    public function getDescription() : string
    {
        return 'Executes missed transactions blocked due to limit configurations in the 25th of July 2019.';
    }

    public function up(Schema $schema) : void
    {
        // this up() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');
    }

    public function down(Schema $schema) : void
    {
        // this down() migration is auto-generated, please modify it to your needs
        $this->abortIf($this->connection->getDatabasePlatform()->getName() !== 'mysql', 'Migration can only be executed safely on \'mysql\'.');
    }

    public function postUp(Schema $schema): void
    {
        parent::postUp($schema);

        $novactToCommerceTxIds = [
            "5d39f2234a0e535dbc69d70c",
            "5d39f2234a0e535dbc69d70a",
            "5d39f2224a0e535dbc69d708",
            "5d39f2204a0e535dbc69d706",
            "5d39f2204a0e535dbc69d704",
            "5d39f21e4a0e535dbc69d702",
            "5d39f1e84a0e535d8f2aec4c",
            "5d39f1e74a0e535d8f2aec4a",
            "5d39f1e64a0e535d8f2aec48",
            "5d39f1e64a0e535d8f2aec46",
            "5d39f1e54a0e535d8f2aec44",
            "5d39f1e34a0e535d8f2aec42",
            "5d39f1ac4a0e535d652ba3fc",
            "5d39f1ab4a0e535d652ba3fa",
            "5d39f1ab4a0e535d652ba3f8",
            "5d39f1aa4a0e535d652ba3f6",
            "5d39f1a74a0e535d652ba3f4",
            "5d39f1a54a0e535d652ba3f2",
            "5d39f1714a0e535d341361ec",
            "5d39f1704a0e535d341361ea",
            "5d39f16f4a0e535d341361e8",
            "5d39f16e4a0e535d341361e6",
            "5d39f16c4a0e535d341361e4",
            "5d39f16a4a0e535d341361e2",
            "5d39f1354a0e535d0644befc",
            "5d39f1344a0e535d0644befa",
            "5d39f1344a0e535d0644bef8",
            "5d39f1334a0e535d0644bef6",
            "5d39f1304a0e535d0644bef4",
            "5d39f12e4a0e535d0644bef2",
            "5d39f0fd4a0e535cd6736320",
            "5d39f0fc4a0e535cd673631e",
            "5d39f0fb4a0e535cd673631c",
            "5d39f0fa4a0e535cd673631a",
            "5d39f0f84a0e535cd6736318",
            "5d39f0f64a0e535cd6736316",
            "5d39f0f54a0e535cd6736314",
            "5d39f0f34a0e535cd6736312",
            "5d39f0bf4a0e535cae329f96",
            "5d39f0be4a0e535cae329f94",
            "5d39f0bc4a0e535cae329f92",
            "5d39f0bc4a0e535cae329f90",
            "5d39f0bb4a0e535cae329f8e",
            "5d39f0ba4a0e535cae329f8c",
            "5d39f0b94a0e535cae329f8a",
            "5d39f0b94a0e535cae329f88",
            "5d39f0b84a0e535cae329f86",
            "5d39f0b74a0e535cae329f84",
            "5d39f0b54a0e535cae329f82",
            "5d39f07b4a0e535c8236eb02",
            "5d39f00a4a0e535c06422ffc",
            "5d39f0094a0e535c06422ffa",
            "5d39f0084a0e535c06422ff8",
            "5d39f0074a0e535c06422ff6",
            "5d39f0044a0e535c06422ff4",
            "5d39f0024a0e535c06422ff2",
            "5d39efd14a0e535bda1a7016",
            "5d39efd14a0e535bda1a7014",
            "5d39efd04a0e535bda1a7012",
            "5d39efcf4a0e535bda1a7010",
            "5d39efce4a0e535bda1a700e",
            "5d39efcd4a0e535bda1a700c",
            "5d39efcc4a0e535bda1a700a",
            "5d39efcb4a0e535bda1a7008",
            "5d39efca4a0e535bda1a7006",
            "5d39efc94a0e535bda1a7004",
            "5d39efc74a0e535bda1a7002",
            "5d39ef534a0e535b887226ba",
            "5d39ef524a0e535b887226b8",
            "5d39ef524a0e535b887226b6",
            "5d39ef514a0e535b887226b4",
            "5d39ef4e4a0e535b887226b2",
            "5d39ef194a0e535b5e6c1c5c",
            "5d39ef184a0e535b5e6c1c5a",
            "5d39ef174a0e535b5e6c1c58",
            "5d39ef164a0e535b5e6c1c56",
            "5d39ef164a0e535b5e6c1c54",
            "5d39ef124a0e535b5e6c1c52",
            "5d39eedc4a0e535b3409b70c",
            "5d39eedb4a0e535b3409b70a",
            "5d39eeda4a0e535b3409b708",
            "5d39eed94a0e535b3409b706",
            "5d39eed84a0e535b3409b704",
            "5d39eed64a0e535b3409b702",
            "5d39eea14a0e535b0a78f2cc",
            "5d39eea14a0e535b0a78f2ca",
            "5d39eea04a0e535b0a78f2c8",
            "5d39ee9f4a0e535b0a78f2c6",
            "5d39ee9d4a0e535b0a78f2c4",
            "5d39ee9b4a0e535b0a78f2c2",
            "5d39ee644a0e535ae0589fac",
            "5d39ee634a0e535ae0589faa",
            "5d39ee624a0e535ae0589fa8",
            "5d39ee614a0e535ae0589fa6",
            "5d39ee604a0e535ae0589fa4",
            "5d39ee5e4a0e535ae0589fa2",
            "5d39ee2b4a0e535ab664dbdc",
            "5d39ee2a4a0e535ab664dbda",
            "5d39ee264a0e535ab664dbd8",
            "5d39ee254a0e535ab664dbd6",
            "5d39ee244a0e535ab664dbd4",
            "5d39ee224a0e535ab664dbd2",
            "5d39edec4a0e535a8b7a98ea",
            "5d39edeb4a0e535a8b7a98e8",
            "5d39edea4a0e535a8b7a98e6",
            "5d39ede94a0e535a8b7a98e4",
            "5d39ede64a0e535a8b7a98e2",
            "5d39edb14a0e535a4b41ef4c",
            "5d39edb04a0e535a4b41ef4a",
            "5d39edaf4a0e535a4b41ef48",
            "5d39edaf4a0e535a4b41ef46",
            "5d39edad4a0e535a4b41ef44",
            "5d39edab4a0e535a4b41ef42",
            "5d39ed754a0e535a214f7812",
            "5d39ed744a0e535a214f7810",
            "5d39ed744a0e535a214f780e",
            "5d39ed734a0e535a214f780c",
            "5d39ed724a0e535a214f780a",
            "5d39ed714a0e535a214f7808",
            "5d39ed704a0e535a214f7806",
            "5d39ed6f4a0e535a214f7804",
            "5d39ed6e4a0e535a214f7802",
            "5d39ed344a0e5359f73dda94",
            "5d39ed324a0e5359f73dda92",
            "5d39ecfd4a0e5359cf750ac0",
            "5d39ecfc4a0e5359cf750abe",
            "5d39ecfb4a0e5359cf750abc",
            "5d39ecf94a0e5359cf750aba",
            "5d39ecf94a0e5359cf750ab8",
            "5d39ecf74a0e5359cf750ab6",
            "5d39ecf64a0e5359cf750ab4",
            "5d39ecf54a0e5359cf750ab2",
            "5d39ecbf4a0e5359a5558e76",
            "5d39ecbc4a0e5359a5558e74",
            "5d39ecba4a0e5359a5558e72",
            "5d39ec844a0e5359792868dc",
            "5d39ec834a0e5359792868da",
            "5d39ec834a0e5359792868d8",
            "5d39ec824a0e5359792868d6",
            "5d39ec804a0e5359792868d4",
            "5d39ec7e4a0e5359792868d2",
            "5d39ec484a0e53594a4a8fae",
            "5d39ec484a0e53594a4a8fac",
            "5d39ec474a0e53594a4a8faa",
            "5d39ec464a0e53594a4a8fa8",
            "5d39ec454a0e53594a4a8fa6",
            "5d39ec434a0e53594a4a8fa4",
            "5d39ec424a0e53594a4a8fa2",
            "5d39ec0a4a0e535920352de8",
            "5d39ec0a4a0e535920352de6",
            "5d39ec084a0e535920352de4",
            "5d39ec064a0e535920352de2",
            "5d39ebd14a0e5358f672188c",
            "5d39ebd04a0e5358f672188a",
            "5d39ebcf4a0e5358f6721888",
            "5d39ebcd4a0e5358f6721886",
            "5d39ebcc4a0e5358f6721884",
            "5d39ebca4a0e5358f6721882",
            "5d39eb954a0e5358ca53352e",
            "5d39eb954a0e5358ca53352c",
            "5d39eb944a0e5358ca53352a",
            "5d39eb934a0e5358ca533528",
            "5d39eb924a0e5358ca533526",
            "5d39eb904a0e5358ca533524",
            "5d39eb8e4a0e5358ca533522",
            "5d39eb584a0e5358a111066c",
            "5d39eb564a0e5358a111066a",
            "5d39eb554a0e5358a1110668",
            "5d39eb544a0e5358a1110666",
            "5d39eb524a0e5358a1110664",
            "5d39eb514a0e5358a1110662",
            "5d39eb2d4a0e53587722923c",
            "5d39eb2c4a0e53587722923a",
            "5d39eb2b4a0e535877229238",
            "5d39eb294a0e535877229236",
            "5d39eb284a0e535877229234",
            "5d39eb264a0e535877229232",
            "5d39eb254a0e535877229230",
            "5d39eb244a0e53587722922e",
            "5d39eb234a0e53587722922c",
            "5d39eb214a0e53587722922a",
            "5d39eb1f4a0e535877229228",
            "5d39eb1c4a0e535877229226",
            "5d39eb194a0e535877229224",
            "5d39eb174a0e535877229222",
            "5d39eadd4a0e53584e2d0eca",
            "5d39eadc4a0e53584e2d0ec8",
            "5d39eadb4a0e53584e2d0ec6",
            "5d39eada4a0e53584e2d0ec4",
            "5d39ead94a0e53584e2d0ec2",
            "5d39ea9d4a0e535824187cb2",
            "5d39ea7f4a0e5357f94bebce",
            "5d39ea7e4a0e5357f94bebcc",
            "5d39ea7d4a0e5357f94bebca",
            "5d39ea7b4a0e5357f94bebc8",
            "5d39ea7a4a0e5357f94bebc6",
            "5d39ea794a0e5357f94bebc4",
            "5d39ea794a0e5357f94bebc2",
            "5d39ea784a0e5357f94bebc0",
            "5d39ea774a0e5357f94bebbe",
            "5d39ea764a0e5357f94bebbc",
            "5d39ea754a0e5357f94bebba",
            "5d39ea744a0e5357f94bebb8",
            "5d39ea744a0e5357f94bebb6",
            "5d39ea734a0e5357f94bebb4",
            "5d39ea724a0e5357f94bebb2",
            "5d39ea714a0e5357f94bebb0",
            "5d39ea704a0e5357f94bebae",
            "5d39ea6f4a0e5357f94bebac",
            "5d39ea6f4a0e5357f94bebaa",
            "5d39ea6d4a0e5357f94beba8",
            "5d39ea6d4a0e5357f94beba6",
            "5d39ea6c4a0e5357f94beba4",
            "5d39ea6b4a0e5357f94beba2",
            "5d39ea6a4a0e5357f94beba0",
            "5d39ea6a4a0e5357f94beb9e",
            "5d39ea694a0e5357f94beb9c",
            "5d39ea674a0e5357f94beb9a",
            "5d39ea664a0e5357f94beb98",
            "5d39ea634a0e5357f94beb96",
            "5d39ea624a0e5357f94beb94",
            "5d39ea614a0e5357f94beb92",
            "5d39ea274a0e5357d0014044",
            "5d39ea264a0e5357d0014042",
            "5d39e9ae4a0e53575b0a8d22",
            "5d39e9734a0e5357081a1252",
            "5d39e8fb4a0e5356365ab424",
            "5d39e8fa4a0e5356365ab422",
            "5d39e8bf4a0e5355e03aaff4",
            "5d39e8be4a0e5355e03aaff2",
            "5d39e8874a0e535594023978",
            "5d39e8864a0e535594023976",
            "5d39e8854a0e535594023974",
            "5d39e8834a0e535594023972",
            "5d39e8164a0e5354ea493516",
            "5d39e8154a0e5354ea493514",
            "5d39e8154a0e5354ea493512",
            "5d39e8144a0e5354ea493510",
            "5d39e8134a0e5354ea49350e",
            "5d39e8114a0e5354ea49350c",
            "5d39e80d4a0e5354ea49350a",
            "5d39e80d4a0e5354ea493508",
            "5d39e80c4a0e5354ea493506",
            "5d39e80b4a0e5354ea493504",
            "5d39e80a4a0e5354ea493502",
            "5d39e7d34a0e5354964b4d7c",
            "5d39e7d24a0e5354964b4d7a",
            "5d39e7d14a0e5354964b4d78",
            "5d39e7d04a0e5354964b4d76",
            "5d39e7cf4a0e5354964b4d74",
            "5d39e7cd4a0e5354964b4d72",
            "5d39e75a4a0e5353f15925d8",
            "5d39e7594a0e5353f15925d6",
            "5d39e7594a0e5353f15925d4",
            "5d39e7564a0e5353f15925d2",
            "5d39e7214a0e53539f0cb6c0",
            "5d39e7204a0e53539f0cb6be",
            "5d39e7204a0e53539f0cb6bc",
            "5d39e71f4a0e53539f0cb6ba",
            "5d39e71e4a0e53539f0cb6b8",
            "5d39e71b4a0e53539f0cb6b6",
            "5d39e71a4a0e53539f0cb6b4",
            "5d39e71a4a0e53539f0cb6b2",
            "5d39e6e04a0e5353495d2734",
            "5d39e6de4a0e5353495d2732",
            "5d39e6ac4a0e5352f60cf85a",
            "5d39e6ab4a0e5352f60cf858",
            "5d39e6a94a0e5352f60cf856",
            "5d39e6a64a0e5352f60cf854",
            "5d39e6a34a0e5352f60cf852",
            "5d39e6754a0e5352a165d164",
            "5d39e6754a0e5352a165d162",
            "5d39e6744a0e5352a165d160",
            "5d39e6734a0e5352a165d15e",
            "5d39e6714a0e5352a165d15c",
            "5d39e6704a0e5352a165d15a",
            "5d39e66e4a0e5352a165d158",
            "5d39e66d4a0e5352a165d156",
            "5d39e66d4a0e5352a165d154",
            "5d39e66c4a0e5352a165d152",
            "5d39e66b4a0e5352a165d150",
            "5d39e66a4a0e5352a165d14e",
            "5d39e6694a0e5352a165d14c",
            "5d39e6694a0e5352a165d14a",
            "5d39e6684a0e5352a165d148",
            "5d39e6674a0e5352a165d146",
            "5d39e6674a0e5352a165d144",
            "5d39e6654a0e5352a165d142",
            "5d39e62c4a0e53524b092fc6",
            "5d39e62b4a0e53524b092fc4",
            "5d39e62b4a0e53524b092fc2",
            "5d39e5ee4a0e5351f7722c32",
            "5d39e5804a0e53515062d3d4",
            "5d39e57f4a0e53515062d3d2",
            "5d39e57d4a0e53515062d3d0",
            "5d39e57c4a0e53515062d3ce",
            "5d39e57c4a0e53515062d3cc",
            "5d39e57b4a0e53515062d3ca",
            "5d39e57a4a0e53515062d3c8",
            "5d39e5794a0e53515062d3c6",
            "5d39e5784a0e53515062d3c4",
            "5d39e5764a0e53515062d3c2",
            "5d39e5044a0e5350aa25c66e",
            "5d39e5034a0e5350aa25c66c",
            "5d39e5024a0e5350aa25c66a",
            "5d39e5024a0e5350aa25c668",
            "5d39e4ff4a0e5350aa25c666",
            "5d39e4ff4a0e5350aa25c664",
            "5d39e4fe4a0e5350aa25c662",
            "5d39e4c34a0e53505947ddc4",
            "5d39e4c24a0e53505947ddc2",
            "5d39e48e4a0e5350043d62ba",
            "5d39e48c4a0e5350043d62b8",
            "5d39e48b4a0e5350043d62b6",
            "5d39e48a4a0e5350043d62b4",
            "5d39e4864a0e5350043d62b2",
            "5d39e4524a0e534fb61d17ac",
            "5d39e4514a0e534fb61d17aa",
            "5d39e4514a0e534fb61d17a8",
            "5d39e44f4a0e534fb61d17a6",
            "5d39e44e4a0e534fb61d17a4",
            "5d39e44d4a0e534fb61d17a2",
            "5d39e4104a0e534f6256cca6",
            "5d39e40e4a0e534f6256cca4",
            "5d39e40d4a0e534f6256cca2",
            "5d39e1ba4a0e534d573fbc6c",
            "5d39e1b94a0e534d573fbc6a",
            "5d39e1b84a0e534d573fbc68",
            "5d39e1b74a0e534d573fbc66",
            "5d39e1b74a0e534d573fbc64",
            "5d39e1b54a0e534d573fbc62",
            "5d39e17a4a0e534d2a005c24",
            "5d39e17a4a0e534d2a005c22",
            "5d39e13e4a0e534d024ce892",
            "5d39dba04a0e5348e30be486",
            "5d39db9f4a0e5348e30be484",
            "5d39db9e4a0e5348e30be482",
            "5d39db614a0e5348bb5f6b02",
        ];

        /** @var DocumentManager $dm */
        $dm = $this->getContainer()->get('doctrine_mongodb.odm.document_manager');
        $txRepo = $dm->getRepository(Transaction::class);
        foreach($novactToCommerceTxIds as $txId){
            print("Checking TX: $txId ...\n");
            $tx = $txRepo->find($txId);
            print_r($tx);
        }

        /*
        $params = array(
            'amount' => $amount,
            'concept' => $concept,
            'address' => $address,
            'txid' => $txid,
            'sender' => $group->getId()
        );
        if(isset($data['internal_tx']) && $data['internal_tx']=='1') {
            $params['internal_tx']='1';
            $params['destionation_id']=$data['destionation_id'];
        }
        $logger->info('(' . $group_id . ')(T) Incomig transaction... Create New');
        $this->createTransaction($params, $version_number, 'in', $method_cname, $destination->getKycManager()->getId(), $destination, '127.0.0.1');
*/
    }

    public function getContainer()
    {
        return $this->container;
    }
}
